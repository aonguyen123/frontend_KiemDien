{"ast":null,"code":"var _jsxFileName = \"E:\\\\react-material\\\\front-end\\\\src\\\\views\\\\Dashboard\\\\components\\\\MemberByPresence\\\\chart.js\";\nimport React from 'react';\nimport palette from 'theme/palette';\nimport PresentIcon from '@material-ui/icons/Spellcheck';\nimport ResonIcon from '@material-ui/icons/Warning';\nimport AbsentIcon from '@material-ui/icons/CancelPresentation';\nimport moment from 'moment';\nexport const fillData = (dataPresences, index) => {\n  let data, statusPresences;\n  const checkDates = dataPresences.checkDates,\n        classPresences = dataPresences.classPresences;\n  const monthCurrent = moment().format('MM');\n  let listDataPresent = 0;\n  let listDataReason = 0;\n  let listDataAbsent = 0;\n  let total = 0;\n\n  if (classPresences.length !== 0) {\n    classPresences.forEach(lop => {\n      checkDates.forEach(item => {\n        if (item.idClass === lop._id) {\n          total += item.dateList.length * lop.dssv.length;\n        }\n      });\n      lop.dssv.forEach(sv => {\n        sv.checkDate.forEach(date => {\n          if (moment(date.date, 'DD/MM/YYYY').format('MM') === monthCurrent && date.status) {\n            listDataPresent++;\n          } else if (moment(date.date, 'DD/MM/YYYY').format('MM') === monthCurrent && !date.status) {\n            listDataReason++;\n          }\n        });\n      });\n    });\n    listDataAbsent = total - (listDataPresent + listDataReason);\n    data = {\n      datasets: [{\n        data: [Math.round(listDataPresent / (listDataPresent + listDataAbsent + listDataReason) * 100), Math.round(listDataAbsent / (listDataPresent + listDataAbsent + listDataReason) * 100), Math.round(listDataReason / (listDataPresent + listDataAbsent + listDataReason) * 100)],\n        backgroundColor: [palette.primary.main, palette.error.main, palette.warning.main],\n        borderWidth: 5,\n        borderColor: palette.white,\n        hoverBorderColor: palette.white\n      }],\n      labels: ['Present', 'Absent', 'Reason']\n    };\n    statusPresences = [{\n      title: 'Present',\n      value: '63',\n      icon: React.createElement(PresentIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }),\n      color: palette.primary.main\n    }, {\n      title: 'Absent',\n      value: '15',\n      icon: React.createElement(AbsentIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }),\n      color: palette.error.main\n    }, {\n      title: 'Reson',\n      value: '23',\n      icon: React.createElement(ResonIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }),\n      color: palette.warning.main\n    }];\n  } else {\n    data = null;\n  } // dataClass.forEach(lop => {\n  //     presences.presenceList.forEach(kd => {\n  //     });\n  // });\n  //const start = moment(new Date()).startOf('isoWeek');\n  // presences.forEach(e => {\n  //     e.presenceList.forEach(item => {\n  //         if(moment(item.checkDate, 'DD/MM/YYYY').isSame(start, 'isoWeek') && item.status)\n  //         {\n  //             listDataPresent.push(item);\n  //         }\n  //         else if(moment(item.checkDate, 'DD/MM/YYYY').isSame(start, 'isoWeek') && !item.status)\n  //         {\n  //             listDataReason.push(item);\n  //         }\n  //     });\n  // });\n  // console.log(listDataPresent.length);\n  // console.log(listDataReason.length);\n  //console.log(moment().isBetween(start, end));\n\n\n  return {\n    data,\n    statusPresences\n  };\n};\nexport const options = {\n  legend: {\n    display: false\n  },\n  responsive: true,\n  maintainAspectRatio: false,\n  layout: {\n    padding: 0\n  },\n  tooltips: {\n    enabled: true,\n    mode: 'index',\n    intersect: false,\n    borderWidth: 1,\n    borderColor: palette.divider,\n    backgroundColor: palette.white,\n    titleFontColor: palette.text.primary,\n    bodyFontColor: palette.text.secondary,\n    footerFontColor: palette.text.secondary\n  }\n};","map":{"version":3,"sources":["E:\\react-material\\front-end\\src\\views\\Dashboard\\components\\MemberByPresence\\chart.js"],"names":["React","palette","PresentIcon","ResonIcon","AbsentIcon","moment","fillData","dataPresences","index","data","statusPresences","checkDates","classPresences","monthCurrent","format","listDataPresent","listDataReason","listDataAbsent","total","length","forEach","lop","item","idClass","_id","dateList","dssv","sv","checkDate","date","status","datasets","Math","round","backgroundColor","primary","main","error","warning","borderWidth","borderColor","white","hoverBorderColor","labels","title","value","icon","color","options","legend","display","responsive","maintainAspectRatio","layout","padding","tooltips","enabled","mode","intersect","divider","titleFontColor","text","bodyFontColor","secondary","footerFontColor"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport palette from 'theme/palette';\r\nimport PresentIcon from '@material-ui/icons/Spellcheck';\r\nimport ResonIcon from '@material-ui/icons/Warning';\r\nimport AbsentIcon from '@material-ui/icons/CancelPresentation';\r\nimport moment from 'moment';\r\n\r\nexport const fillData = (dataPresences, index) => {\r\n    let data, statusPresences;\r\n    const { checkDates, classPresences } = dataPresences;\r\n    const monthCurrent = moment().format('MM');\r\n    let listDataPresent = 0;\r\n    let listDataReason = 0;\r\n    let listDataAbsent = 0;\r\n    let total = 0;\r\n\r\n    if (classPresences.length !== 0) {\r\n        classPresences.forEach(lop => {\r\n            checkDates.forEach(item => {\r\n                if (item.idClass === lop._id) {\r\n                    total += item.dateList.length * lop.dssv.length;\r\n                }\r\n            });\r\n\r\n            lop.dssv.forEach(sv => {\r\n                sv.checkDate.forEach(date => {\r\n                    if (\r\n                        moment(date.date, 'DD/MM/YYYY').format('MM') ===\r\n                            monthCurrent &&\r\n                        date.status\r\n                    ) {\r\n                        listDataPresent++;\r\n                    } else if (\r\n                        moment(date.date, 'DD/MM/YYYY').format('MM') ===\r\n                            monthCurrent &&\r\n                        !date.status\r\n                    ) {\r\n                        listDataReason++;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        listDataAbsent = total - (listDataPresent + listDataReason);\r\n\r\n        data = {\r\n            datasets: [\r\n                {\r\n                    data: [\r\n                        Math.round(\r\n                            (listDataPresent /\r\n                                (listDataPresent +\r\n                                    listDataAbsent +\r\n                                    listDataReason)) *\r\n                                100\r\n                        ),\r\n                        Math.round(\r\n                            (listDataAbsent /\r\n                                (listDataPresent +\r\n                                    listDataAbsent +\r\n                                    listDataReason)) *\r\n                                100\r\n                        ),\r\n                        Math.round(\r\n                            (listDataReason /\r\n                                (listDataPresent +\r\n                                    listDataAbsent +\r\n                                    listDataReason)) *\r\n                                100\r\n                        )\r\n                    ],\r\n                    backgroundColor: [\r\n                        palette.primary.main,\r\n                        palette.error.main,\r\n                        palette.warning.main\r\n                    ],\r\n                    borderWidth: 5,\r\n                    borderColor: palette.white,\r\n                    hoverBorderColor: palette.white\r\n                }\r\n            ],\r\n            labels: ['Present', 'Absent', 'Reason']\r\n        };\r\n        statusPresences = [\r\n            {\r\n                title: 'Present',\r\n                value: '63',\r\n                icon: <PresentIcon />,\r\n                color: palette.primary.main\r\n            },\r\n            {\r\n                title: 'Absent',\r\n                value: '15',\r\n                icon: <AbsentIcon />,\r\n                color: palette.error.main\r\n            },\r\n            {\r\n                title: 'Reson',\r\n                value: '23',\r\n                icon: <ResonIcon />,\r\n                color: palette.warning.main\r\n            }\r\n        ];\r\n    } else {\r\n        data = null;\r\n    }\r\n    // dataClass.forEach(lop => {\r\n    //     presences.presenceList.forEach(kd => {\r\n\r\n    //     });\r\n    // });\r\n\r\n    //const start = moment(new Date()).startOf('isoWeek');\r\n\r\n    // presences.forEach(e => {\r\n    //     e.presenceList.forEach(item => {\r\n    //         if(moment(item.checkDate, 'DD/MM/YYYY').isSame(start, 'isoWeek') && item.status)\r\n    //         {\r\n    //             listDataPresent.push(item);\r\n    //         }\r\n    //         else if(moment(item.checkDate, 'DD/MM/YYYY').isSame(start, 'isoWeek') && !item.status)\r\n    //         {\r\n    //             listDataReason.push(item);\r\n    //         }\r\n    //     });\r\n    // });\r\n\r\n    // console.log(listDataPresent.length);\r\n    // console.log(listDataReason.length);\r\n\r\n    //console.log(moment().isBetween(start, end));\r\n\r\n    return {\r\n        data,\r\n        statusPresences\r\n    };\r\n};\r\nexport const options = {\r\n    legend: {\r\n        display: false\r\n    },\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    layout: { padding: 0 },\r\n    tooltips: {\r\n        enabled: true,\r\n        mode: 'index',\r\n        intersect: false,\r\n        borderWidth: 1,\r\n        borderColor: palette.divider,\r\n        backgroundColor: palette.white,\r\n        titleFontColor: palette.text.primary,\r\n        bodyFontColor: palette.text.secondary,\r\n        footerFontColor: palette.text.secondary\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}