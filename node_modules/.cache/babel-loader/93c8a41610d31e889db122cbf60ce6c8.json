{"ast":null,"code":"import { GET_ERRORS, LOG_IN, LOG_OUT, FORGOT_PASSWORD } from './../constants/types';\nimport { callAPI, setAuthToken } from 'common';\nexport const login = (account, history) => dispatch => {\n  callAPI('/login', 'POST', {\n    account\n  }).then(res => {\n    const token = res.data.token;\n    localStorage.setItem('jwtToken', token);\n    setAuthToken(token);\n    dispatch({\n      type: LOG_IN\n    });\n    history.push('/');\n  }).catch(err => {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  });\n};\nexport const logout = history => dispatch => {\n  localStorage.removeItem('jwtToken');\n  setAuthToken(false);\n  dispatch({\n    type: LOG_OUT\n  });\n  history.push('/sign-in');\n};\nexport const forgotPassword = email => dispatch => {\n  getData(email, dispatch);\n};\n\nconst getData = async (email, dispatch) => {\n  const result = await callAPI('/forgotPassword', 'POST', {\n    email\n  }).catch(err => {\n    dispatch({\n      type: GET_ERRORS,\n      payload: err.response.data\n    });\n  });\n\n  if (result) {\n    dispatch({\n      type: FORGOT_PASSWORD,\n      payload: result.data\n    });\n  }\n};","map":{"version":3,"sources":["E:\\react-material\\front-end\\src\\actions\\authentication.js"],"names":["GET_ERRORS","LOG_IN","LOG_OUT","FORGOT_PASSWORD","callAPI","setAuthToken","login","account","history","dispatch","then","res","token","data","localStorage","setItem","type","push","catch","err","payload","response","logout","removeItem","forgotPassword","email","getData","result"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,eAAtC,QAA6D,sBAA7D;AACA,SAASC,OAAT,EAAkBC,YAAlB,QAAsC,QAAtC;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,OAAD,EAAUC,OAAV,KAAsBC,QAAQ,IAAI;AACnDL,EAAAA,OAAO,CAAC,QAAD,EAAW,MAAX,EAAmB;AAACG,IAAAA;AAAD,GAAnB,CAAP,CACKG,IADL,CACUC,GAAG,IAAI;AAAA,UACDC,KADC,GACSD,GAAG,CAACE,IADb,CACDD,KADC;AAETE,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,KAAjC;AACAP,IAAAA,YAAY,CAACO,KAAD,CAAZ;AACAH,IAAAA,QAAQ,CAAC;AACLO,MAAAA,IAAI,EAAEf;AADD,KAAD,CAAR;AAGAO,IAAAA,OAAO,CAACS,IAAR,CAAa,GAAb;AACH,GATL,EAUKC,KAVL,CAUWC,GAAG,IAAI;AACVV,IAAAA,QAAQ,CAAC;AACLO,MAAAA,IAAI,EAAEhB,UADD;AAELoB,MAAAA,OAAO,EAAED,GAAG,CAACE,QAAJ,CAAaR;AAFjB,KAAD,CAAR;AAIH,GAfL;AAgBH,CAjBM;AAkBP,OAAO,MAAMS,MAAM,GAAGd,OAAO,IAAIC,QAAQ,IAAI;AACzCK,EAAAA,YAAY,CAACS,UAAb,CAAwB,UAAxB;AACAlB,EAAAA,YAAY,CAAC,KAAD,CAAZ;AACAI,EAAAA,QAAQ,CAAC;AACLO,IAAAA,IAAI,EAAEd;AADD,GAAD,CAAR;AAGAM,EAAAA,OAAO,CAACS,IAAR,CAAa,UAAb;AACH,CAPM;AAQP,OAAO,MAAMO,cAAc,GAAGC,KAAK,IAAIhB,QAAQ,IAAI;AAC/CiB,EAAAA,OAAO,CAACD,KAAD,EAAQhB,QAAR,CAAP;AACH,CAFM;;AAGP,MAAMiB,OAAO,GAAG,OAAOD,KAAP,EAAchB,QAAd,KAA2B;AACvC,QAAMkB,MAAM,GAAG,MAAMvB,OAAO,CAAC,iBAAD,EAAoB,MAApB,EAA4B;AAACqB,IAAAA;AAAD,GAA5B,CAAP,CACpBP,KADoB,CACdC,GAAG,IAAI;AACVV,IAAAA,QAAQ,CAAC;AACLO,MAAAA,IAAI,EAAEhB,UADD;AAELoB,MAAAA,OAAO,EAAED,GAAG,CAACE,QAAJ,CAAaR;AAFjB,KAAD,CAAR;AAIH,GANoB,CAArB;;AAOA,MAAGc,MAAH,EACA;AACIlB,IAAAA,QAAQ,CAAC;AACLO,MAAAA,IAAI,EAAEb,eADD;AAELiB,MAAAA,OAAO,EAAEO,MAAM,CAACd;AAFX,KAAD,CAAR;AAIH;AACJ,CAfD","sourcesContent":["import { GET_ERRORS, LOG_IN, LOG_OUT, FORGOT_PASSWORD } from './../constants/types';\r\nimport { callAPI, setAuthToken } from 'common';\r\n\r\nexport const login = (account, history) => dispatch => {\r\n    callAPI('/login', 'POST', {account})\r\n        .then(res => {\r\n            const { token } = res.data;\r\n            localStorage.setItem('jwtToken', token);\r\n            setAuthToken(token);\r\n            dispatch({\r\n                type: LOG_IN\r\n            });\r\n            history.push('/');\r\n        })\r\n        .catch(err => {\r\n            dispatch({\r\n                type: GET_ERRORS,\r\n                payload: err.response.data\r\n            });\r\n        });  \r\n};\r\nexport const logout = history => dispatch => {\r\n    localStorage.removeItem('jwtToken');\r\n    setAuthToken(false);\r\n    dispatch({\r\n        type: LOG_OUT\r\n    });\r\n    history.push('/sign-in');\r\n};\r\nexport const forgotPassword = email => dispatch => {\r\n    getData(email, dispatch);\r\n};\r\nconst getData = async (email, dispatch) => {\r\n    const result = await callAPI('/forgotPassword', 'POST', {email})\r\n    .catch(err => {\r\n        dispatch({\r\n            type: GET_ERRORS,\r\n            payload: err.response.data\r\n        });\r\n    });\r\n    if(result)\r\n    {\r\n        dispatch({\r\n            type: FORGOT_PASSWORD,\r\n            payload: result.data\r\n        });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}