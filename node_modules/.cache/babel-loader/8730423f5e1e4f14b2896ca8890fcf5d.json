{"ast":null,"code":"import _slicedToArray from \"E:\\\\react-material\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\react-material\\\\front-end\\\\src\\\\views\\\\PresencesDetail\\\\components\\\\PresencesTable\\\\PresencesTable.js\";\nimport React, { useState } from 'react';\nimport clsx from 'clsx';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport { withStyles } from '@material-ui/styles';\nimport { Card, CardActions, CardContent, Checkbox, Table, TableBody, TableCell, TableHead, TableRow, Typography, TablePagination, Divider } from '@material-ui/core';\nimport CheckIcon from '@material-ui/icons/Check';\nimport ToolbarTable from './component/ToolbarTable/ToolbarTable';\nimport styles from './styles';\n\nconst PresencesTable = props => {\n  const className = props.className,\n        classes = props.classes,\n        presenceDetailClass = props.presenceDetailClass,\n        deletePresenceMember = props.deletePresenceMember;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        selectedMember = _useState2[0],\n        setSelectedMember = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedMssv = _useState4[0],\n        setSelectedMssv = _useState4[1];\n\n  const _useState5 = useState(5),\n        _useState6 = _slicedToArray(_useState5, 2),\n        rowsPerPage = _useState6[0],\n        setRowsPerPage = _useState6[1];\n\n  const _useState7 = useState(0),\n        _useState8 = _slicedToArray(_useState7, 2),\n        page = _useState8[0],\n        setPage = _useState8[1];\n\n  const checkDateList = presenceDetailClass.checkDateList,\n        classById = presenceDetailClass.classById;\n  const idClass = classById._id;\n\n  const handleSelectAll = event => {\n    let selectedMember;\n    let selectedMssv;\n\n    if (event.target.checked) {\n      selectedMember = classById.dssv.map(sv => sv._id);\n      selectedMssv = classById.dssv.map(sv => sv.maSV);\n    } else {\n      selectedMember = [];\n      selectedMssv = [];\n    }\n\n    setSelectedMember(selectedMember);\n    setSelectedMssv(selectedMssv);\n  };\n\n  const handleSelectOne = (event, id, maSV) => {\n    const selectedIndex = selectedMember.indexOf(id);\n    const selectedIndexMssv = selectedMssv.indexOf(maSV);\n    let newSelectedMember = [];\n    let newSelectedMssv = [];\n\n    if (selectedIndex === -1) {\n      newSelectedMember = newSelectedMember.concat(selectedMember, id);\n      newSelectedMssv = newSelectedMssv.concat(selectedMssv, maSV);\n    } else if (selectedIndex === 0 && selectedIndexMssv === 0) {\n      newSelectedMember = newSelectedMember.concat(selectedMember.slice(1));\n      newSelectedMssv = newSelectedMssv.concat(selectedMssv.slice(1));\n    } else if (selectedIndex === selectedMember.length - 1 && selectedIndexMssv === selectedMssv.length - 1) {\n      newSelectedMember = newSelectedMember.concat(selectedMember.slice(0, -1));\n      newSelectedMssv = newSelectedMssv.concat(selectedMssv.slice(0, -1));\n    } else if (selectedIndex > 0 && selectedIndexMssv > 0) {\n      newSelectedMember = newSelectedMember.concat(selectedMember.slice(0, selectedIndex), selectedMember.slice(selectedIndex + 1));\n      newSelectedMssv = newSelectedMssv.concat(selectedMssv.slice(0, selectedIndexMssv), selectedMssv.slice(selectedIndexMssv + 1));\n    }\n\n    setSelectedMember(newSelectedMember);\n    setSelectedMssv(newSelectedMssv);\n  };\n\n  const handlePageChange = (event, page) => {\n    setPage(page);\n  };\n\n  const handleRowsPerPageChange = event => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  return React.createElement(Card, {\n    className: clsx(classes.root, className),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(ToolbarTable, {\n    selectedMember: selectedMember,\n    selectedMssv: selectedMssv,\n    idClass: idClass,\n    deletePresenceMember: deletePresenceMember,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(CardContent, {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(PerfectScrollbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    rowSpan: 2,\n    padding: \"checkbox\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(Checkbox, {\n    checked: classById.dssv && selectedMember.length === classById.dssv.length,\n    color: \"primary\",\n    indeterminate: selectedMember.length > 0 && selectedMember.length < classById.dssv.length,\n    onChange: handleSelectAll,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    rowSpan: 2,\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Member code\"), React.createElement(TableCell, {\n    rowSpan: 2,\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, checkDateList ? React.createElement(\"div\", {\n    style: {\n      width: '150px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Name\") : 'Name'), React.createElement(TableCell, {\n    rowSpan: 2,\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Birth date\"), React.createElement(TableCell, {\n    rowSpan: 2,\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Gender\"), checkDateList && React.createElement(TableCell, {\n    className: classes.borderTable,\n    colSpan: checkDateList.dateList && checkDateList.dateList.length,\n    align: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"Check date\")), checkDateList && React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, checkDateList.dateList && checkDateList.dateList.map(date => React.createElement(TableCell, {\n    key: date._id,\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, date.date)))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, classById.dssv && classById.dssv.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(sv => React.createElement(TableRow, {\n    key: sv._id,\n    className: classes.tableRow,\n    hover: true,\n    selected: selectedMember.indexOf(sv._id) !== -1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    padding: \"checkbox\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(Checkbox, {\n    checked: selectedMember.indexOf(sv._id) !== -1,\n    color: \"primary\",\n    onChange: event => handleSelectOne(event, sv._id, sv.maSV),\n    value: \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, sv.maSV)), React.createElement(TableCell, {\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, sv.tenSV), React.createElement(TableCell, {\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, sv.ngaysinh), React.createElement(TableCell, {\n    align: \"center\",\n    className: classes.borderTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, sv.gioitinh), checkDateList && checkDateList.dateList.map(date => {\n    if (!sv.checkDate.some(x => x.date === date.date)) {\n      return React.createElement(TableCell, {\n        key: date._id,\n        align: \"center\",\n        className: classes.borderTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      });\n    }\n\n    return sv.checkDate.map((kd, index) => {\n      if (date.date === kd.date && kd.status) {\n        return React.createElement(TableCell, {\n          key: index,\n          align: \"center\",\n          className: classes.borderTable,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, React.createElement(CheckIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }));\n      } else if (date.date === kd.date && !kd.status) {\n        return React.createElement(TableCell, {\n          key: index,\n          align: \"center\",\n          className: classes.borderTable,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, \"P\");\n      }\n\n      return null;\n    });\n  })))))))), React.createElement(CardActions, {\n    className: classes.actions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333\n    },\n    __self: this\n  }, React.createElement(TablePagination, {\n    component: \"div\",\n    count: classById.dssv ? classById.dssv.length : 0,\n    onChangePage: handlePageChange,\n    onChangeRowsPerPage: handleRowsPerPageChange,\n    page: page,\n    rowsPerPage: rowsPerPage,\n    rowsPerPageOptions: [],\n    backIconButtonProps: {\n      'aria-label': 'previous page'\n    },\n    nextIconButtonProps: {\n      'aria-label': 'next page'\n    },\n    labelRowsPerPage: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  })));\n};\n\nexport default withStyles(styles)(PresencesTable);","map":{"version":3,"sources":["E:\\react-material\\front-end\\src\\views\\PresencesDetail\\components\\PresencesTable\\PresencesTable.js"],"names":["React","useState","clsx","PerfectScrollbar","withStyles","Card","CardActions","CardContent","Checkbox","Table","TableBody","TableCell","TableHead","TableRow","Typography","TablePagination","Divider","CheckIcon","ToolbarTable","styles","PresencesTable","props","className","classes","presenceDetailClass","deletePresenceMember","selectedMember","setSelectedMember","selectedMssv","setSelectedMssv","rowsPerPage","setRowsPerPage","page","setPage","checkDateList","classById","idClass","_id","handleSelectAll","event","target","checked","dssv","map","sv","maSV","handleSelectOne","id","selectedIndex","indexOf","selectedIndexMssv","newSelectedMember","newSelectedMssv","concat","slice","length","handlePageChange","handleRowsPerPageChange","value","root","content","inner","borderTable","width","dateList","date","tableRow","tenSV","ngaysinh","gioitinh","checkDate","some","x","kd","index","status","actions"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport clsx from 'clsx';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport {\r\n    Card,\r\n    CardActions,\r\n    CardContent,\r\n    Checkbox,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n    Typography,\r\n    TablePagination,\r\n    Divider\r\n} from '@material-ui/core';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport ToolbarTable from './component/ToolbarTable/ToolbarTable';\r\nimport styles from './styles';\r\n\r\nconst PresencesTable = props => {\r\n    const {\r\n        className,\r\n        classes,\r\n        presenceDetailClass,\r\n        deletePresenceMember\r\n    } = props;\r\n    const [selectedMember, setSelectedMember] = useState([]);\r\n    const [selectedMssv, setSelectedMssv] = useState([]);\r\n    const [rowsPerPage, setRowsPerPage] = useState(5);\r\n    const [page, setPage] = useState(0);\r\n    const { checkDateList, classById } = presenceDetailClass;\r\n    const idClass = classById._id;\r\n\r\n    const handleSelectAll = event => {\r\n        let selectedMember;\r\n        let selectedMssv;\r\n        if (event.target.checked) {\r\n            selectedMember = classById.dssv.map(sv => sv._id);\r\n            selectedMssv = classById.dssv.map(sv => sv.maSV);\r\n        } else {\r\n            selectedMember = [];\r\n            selectedMssv = [];\r\n        }\r\n        setSelectedMember(selectedMember);\r\n        setSelectedMssv(selectedMssv);\r\n    };\r\n    const handleSelectOne = (event, id, maSV) => {\r\n        const selectedIndex = selectedMember.indexOf(id);\r\n        const selectedIndexMssv = selectedMssv.indexOf(maSV);\r\n        let newSelectedMember = [];\r\n        let newSelectedMssv = [];\r\n        if (selectedIndex === -1) {\r\n            newSelectedMember = newSelectedMember.concat(selectedMember, id);\r\n            newSelectedMssv = newSelectedMssv.concat(selectedMssv, maSV);\r\n        } else if (selectedIndex === 0 && selectedIndexMssv === 0) {\r\n            newSelectedMember = newSelectedMember.concat(\r\n                selectedMember.slice(1)\r\n            );\r\n            newSelectedMssv = newSelectedMssv.concat(selectedMssv.slice(1));\r\n        } else if (\r\n            selectedIndex === selectedMember.length - 1 &&\r\n            selectedIndexMssv === selectedMssv.length - 1\r\n        ) {\r\n            newSelectedMember = newSelectedMember.concat(\r\n                selectedMember.slice(0, -1)\r\n            );\r\n            newSelectedMssv = newSelectedMssv.concat(selectedMssv.slice(0, -1));\r\n        } else if (selectedIndex > 0 && selectedIndexMssv > 0) {\r\n            newSelectedMember = newSelectedMember.concat(\r\n                selectedMember.slice(0, selectedIndex),\r\n                selectedMember.slice(selectedIndex + 1)\r\n            );\r\n            newSelectedMssv = newSelectedMssv.concat(\r\n                selectedMssv.slice(0, selectedIndexMssv),\r\n                selectedMssv.slice(selectedIndexMssv + 1)\r\n            );\r\n        }\r\n        setSelectedMember(newSelectedMember);\r\n        setSelectedMssv(newSelectedMssv);\r\n    };\r\n    const handlePageChange = (event, page) => {\r\n        setPage(page);\r\n    };\r\n    const handleRowsPerPageChange = event => {\r\n        setRowsPerPage(+event.target.value);\r\n        setPage(0);\r\n    };\r\n\r\n    return (\r\n        <Card className={clsx(classes.root, className)}>\r\n            <ToolbarTable\r\n                selectedMember={selectedMember}\r\n                selectedMssv={selectedMssv}\r\n                idClass={idClass}\r\n                deletePresenceMember={deletePresenceMember}\r\n            />\r\n            <Divider />\r\n            <CardContent className={classes.content}>\r\n                <PerfectScrollbar>\r\n                    <div className={classes.inner}>\r\n                        <Table size=\"small\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell\r\n                                        rowSpan={2}\r\n                                        padding=\"checkbox\"\r\n                                        className={classes.borderTable}\r\n                                    >\r\n                                        <Checkbox\r\n                                            checked={\r\n                                                classById.dssv &&\r\n                                                selectedMember.length ===\r\n                                                    classById.dssv.length\r\n                                            }\r\n                                            color=\"primary\"\r\n                                            indeterminate={\r\n                                                selectedMember.length > 0 &&\r\n                                                selectedMember.length <\r\n                                                    classById.dssv.length\r\n                                            }\r\n                                            onChange={handleSelectAll}\r\n                                        />\r\n                                    </TableCell>\r\n                                    <TableCell\r\n                                        rowSpan={2}\r\n                                        align=\"center\"\r\n                                        className={classes.borderTable}\r\n                                    >\r\n                                        Member code\r\n                                    </TableCell>\r\n                                    <TableCell\r\n                                        rowSpan={2}\r\n                                        className={classes.borderTable}\r\n                                    >\r\n                                        {checkDateList ? (\r\n                                            <div style={{ width: '150px' }}>\r\n                                                Name\r\n                                            </div>\r\n                                        ) : (\r\n                                            'Name'\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell\r\n                                        rowSpan={2}\r\n                                        align=\"center\"\r\n                                        className={classes.borderTable}\r\n                                    >\r\n                                        Birth date\r\n                                    </TableCell>\r\n                                    <TableCell\r\n                                        rowSpan={2}\r\n                                        align=\"center\"\r\n                                        className={classes.borderTable}\r\n                                    >\r\n                                        Gender\r\n                                    </TableCell>\r\n                                    {checkDateList && (\r\n                                        <TableCell\r\n                                            className={classes.borderTable}\r\n                                            colSpan={\r\n                                                checkDateList.dateList &&\r\n                                                checkDateList.dateList.length\r\n                                            }\r\n                                            align=\"center\"\r\n                                        >\r\n                                            Check date\r\n                                        </TableCell>\r\n                                    )}\r\n                                </TableRow>\r\n                                {checkDateList && (\r\n                                    <TableRow>\r\n                                        {checkDateList.dateList &&\r\n                                            checkDateList.dateList.map(date => (\r\n                                                <TableCell\r\n                                                    key={date._id}\r\n                                                    align=\"center\"\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    {date.date}\r\n                                                </TableCell>\r\n                                            ))}\r\n                                    </TableRow>\r\n                                )}\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {classById.dssv &&\r\n                                    classById.dssv\r\n                                        .slice(\r\n                                            page * rowsPerPage,\r\n                                            page * rowsPerPage + rowsPerPage\r\n                                        )\r\n                                        .map(sv => (\r\n                                            <TableRow\r\n                                                key={sv._id}\r\n                                                className={classes.tableRow}\r\n                                                hover\r\n                                                selected={\r\n                                                    selectedMember.indexOf(\r\n                                                        sv._id\r\n                                                    ) !== -1\r\n                                                }\r\n                                            >\r\n                                                <TableCell\r\n                                                    padding=\"checkbox\"\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    <Checkbox\r\n                                                        checked={\r\n                                                            selectedMember.indexOf(\r\n                                                                sv._id\r\n                                                            ) !== -1\r\n                                                        }\r\n                                                        color=\"primary\"\r\n                                                        onChange={event =>\r\n                                                            handleSelectOne(\r\n                                                                event,\r\n                                                                sv._id,\r\n                                                                sv.maSV\r\n                                                            )\r\n                                                        }\r\n                                                        value=\"true\"\r\n                                                    />\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    align=\"center\"\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    <Typography variant=\"body1\">\r\n                                                        {sv.maSV}\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    {sv.tenSV}\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    align=\"center\"\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    {sv.ngaysinh}\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    align=\"center\"\r\n                                                    className={\r\n                                                        classes.borderTable\r\n                                                    }\r\n                                                >\r\n                                                    {sv.gioitinh}\r\n                                                </TableCell>\r\n                                                {checkDateList &&\r\n                                                    checkDateList.dateList.map(\r\n                                                        date => {\r\n                                                            if (\r\n                                                                !sv.checkDate.some(\r\n                                                                    x =>\r\n                                                                        x.date ===\r\n                                                                        date.date\r\n                                                                )\r\n                                                            ) {\r\n                                                                return (\r\n                                                                    <TableCell\r\n                                                                        key={\r\n                                                                            date._id\r\n                                                                        }\r\n                                                                        align=\"center\"\r\n                                                                        className={\r\n                                                                            classes.borderTable\r\n                                                                        }\r\n                                                                    ></TableCell>\r\n                                                                );\r\n                                                            }\r\n                                                            return sv.checkDate.map(\r\n                                                                (kd, index) => {\r\n                                                                    if (\r\n                                                                        date.date === kd.date && kd.status\r\n                                                                    ) {\r\n                                                                        return (\r\n                                                                            <TableCell\r\n                                                                                key={\r\n                                                                                    index\r\n                                                                                }\r\n                                                                                align=\"center\"\r\n                                                                                className={\r\n                                                                                    classes.borderTable\r\n                                                                                }\r\n                                                                            >\r\n                                                                                <CheckIcon />\r\n                                                                            </TableCell>\r\n                                                                        );\r\n                                                                    }\r\n                                                                    else if(date.date === kd.date && !kd.status)\r\n                                                                    {\r\n                                                                        return (\r\n                                                                            <TableCell\r\n                                                                                key={\r\n                                                                                    index\r\n                                                                                }\r\n                                                                                align=\"center\"\r\n                                                                                className={\r\n                                                                                    classes.borderTable\r\n                                                                                }\r\n                                                                            >\r\n                                                                                P\r\n                                                                            </TableCell>\r\n                                                                        );\r\n                                                                    } \r\n                                                                    return null;\r\n                                                                }\r\n                                                            );\r\n                                                        }\r\n                                                    )}\r\n                                            </TableRow>\r\n                                        ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                </PerfectScrollbar>\r\n            </CardContent>\r\n            <CardActions className={classes.actions}>\r\n                <TablePagination\r\n                    component=\"div\"\r\n                    count={classById.dssv ? classById.dssv.length : 0}\r\n                    onChangePage={handlePageChange}\r\n                    onChangeRowsPerPage={handleRowsPerPageChange}\r\n                    page={page}\r\n                    rowsPerPage={rowsPerPage}\r\n                    rowsPerPageOptions={[]}\r\n                    backIconButtonProps={{\r\n                        'aria-label': 'previous page'\r\n                    }}\r\n                    nextIconButtonProps={{\r\n                        'aria-label': 'next page'\r\n                    }}\r\n                    labelRowsPerPage=\"\"\r\n                />\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n};\r\nexport default withStyles(styles)(PresencesTable);\r\n"]},"metadata":{},"sourceType":"module"}